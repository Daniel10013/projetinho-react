generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model disciplina {
  id           Int       @id @default(autoincrement())
  nome         String    @db.VarChar(30)
  professor_id Int
  professor    professor @relation(fields: [professor_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "disciplina_ibfk_1")
  turma        turma[]

  @@index([professor_id], map: "professor_id")
}

model professor {
  id         Int          @id @default(autoincrement())
  nome       String       @db.VarChar(100)
  email      String       @db.VarChar(100)
  senha      String       @db.VarChar(100)
  aulas      aulas[]
  aulas_dia  aulas_dia[]
  disciplina disciplina[]
  turma      turma[]
}

model turma {
  id            Int         @id @default(autoincrement())
  nome          String      @db.VarChar(30)
  limite_alunos Int
  professor_id  Int
  disciplina_id Int
  professor     professor   @relation(fields: [professor_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "turma_ibfk_1")
  disciplina    disciplina  @relation(fields: [disciplina_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "turma_ibfk_2")
  aulas_dia     aulas_dia[]

  @@index([professor_id], map: "professor_id")
  @@index([disciplina_id], map: "disciplina_id")
}

model usuarios {
  id      Int    @id @db.UnsignedInt
  usuario String @db.VarChar(100)
  cnpj    String @db.VarChar(20)
  email   String @db.VarChar(100)
  senha   String @db.VarChar(255)
}

model aulas {
  id           Int       @id @default(autoincrement())
  inicio_aulas DateTime  @db.Date
  fim_aulas    DateTime  @db.Date
  professor_id Int
  professor    professor @relation(fields: [professor_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "aulas_ibfk_1")

  @@index([professor_id], map: "professor_id")
}

model aulas_dia {
  id            Int       @id @default(autoincrement())
  dia_aula      DateTime  @db.Date
  dia_da_semana String?   @db.VarChar(30)
  turma_id      Int
  professor_id  Int
  turma         turma     @relation(fields: [turma_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "aulas_dia_ibfk_1")
  professor     professor @relation(fields: [professor_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "aulas_dia_ibfk_2")

  @@index([professor_id], map: "professor_id")
  @@index([turma_id], map: "turma_id")
}
